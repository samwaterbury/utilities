#!/usr/bin/env bash
#
# Creates the Python env I use for training the terminator (and other tasks).

set -e
VIRTUAL_ENV_DIR=~/virtualenv

# Install with conda
if [ "$1" = "--conda" ]; then

    # Setup
    . /usr/local/miniconda3/etc/profile.d/conda.sh
    conda create --yes --name dragons python pip
    conda activate dragons

    # Packages
    conda install --yes \
        'python-language-server[all]' \
        bokeh plotly \
        catboost \
        flake8 \
        ipython \
        jupyterlab \
        keras \
        lightgbm \
        matplotlib \
        nltk \
        numpy \
        pandas \
        pep8 \
        pytest \
        pywavelets \
        scikit-learn \
        scipy \
        seaborn \
        spacy \
        statsmodels \
        tensorflow \
        tqdm \
        virtualenv \
        xgboost

    # Finish
    conda deactivate

# Install with PIP
elif [ "$1" = "--virtualenv" ]; then

    # Setup
    mkdir -p $VIRTUAL_ENV_DIR
    cd $VIRTUAL_ENV_DIR
    virtualenv dragons
    . dragons/bin/activate

    # Packages
    pip3 install \
        'python-language-server[all]' \
        bokeh plotly \
        catboost \
        flake8 \
        ipython \
        jupyterlab \
        lightgbm \
        matplotlib \
        nltk \
        numpy \
        pandas \
        pep8 \
        pytest \
        pywavelets \
        scikit-learn \
        scipy \
        seaborn \
        spacy \
        statsmodels \
        tensorflow \
        tqdm \
        virtualenv \
        xgboost

else
    echo "Specify the environment manager to use with --virtualenv or --conda."
    exit 1
fi
