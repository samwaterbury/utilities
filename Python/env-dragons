#!/usr/bin/env bash
#
# Creates the Python env I use for training the terminator (and other tasks).

set -e

# Update conda itself
conda update --yes --name base --channel defaults conda

# Miniconda needs to be initialized
if [ $(echo $PATH | grep /usr/local/sbin) ]; then
    . /usr/local/Caskroom/miniconda/base/etc/profile.d/conda.sh
else
    . /usr/local/miniconda3/etc/profile.d/conda.sh
fi

# Create the environment
conda create --yes --name dragons python pip
conda activate dragons

# Packages
conda install --yes \
    'python-language-server[all]' \
    bokeh \
    catboost \
    dask \
    ipykernel \
    ipython \
    lightgbm \
    matplotlib \
    numpy \
    pandas \
    plotly \
    pytest \
    scikit-learn \
    scipy \
    seaborn \
    spacy \
    statsmodels \
    tensorflow \
    tensorflow-probability \
    tqdm \
    xgboost

# Setup Jupyter environment
ipython kernel install --user --name dragons

# Finish
conda deactivate
